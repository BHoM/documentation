# Producing a beta installer

This outlines the steps necessary to follow to obtain a beta installer, and make it available for testing and release. This document forms part of the [End of Milestone Procedure](End-of-Milestone-procedure).

# 1 - Scope

This procedure/guide is designed for the creation of a beta installer at the end of a milestone, or when a patch is required. 

## 1.1 - Pre-information/decisions

The following information is to be provided and authorised by the DevOps team:

 - PatchVersion - this should be 0 for an end of milestone release, but if doing a [beta patch release](Beta-Patching-Procedure), this should refer to the patch number being produced
 - ReleaseType - this should be set to beta for any beta installer
 - Version - this should be set to the end of milestone version, inclusive of v - e.g. v3.0 v3.1, etc.

# 2 - Beta Test Artefacts

Prior to the distribution of the beta, beta test artefacts are to be produced during each day of the final sprint of the milestone. These are generated by BHoMBot at 3am UK time and should be set up by DevOps to trigger nightly.

The beta test branch should be set appropriately from the Pull Requests which aim to merge the `develop` branches into `main`. Where a branch does not exist (because it has been merged or because there is nothing to deploy this milestone for that repository) then the `main` branch must be used instead.

Queuing up beta test artefacts is already written into BHoMBots code but the trigger is commented out during the milestone when not required. Turning this trigger on should be done by DevOps at the start of the final sprint of the milestone.

The major version should be set without a `v` at the start, and should be set to the milestone that it is being produced for - e.g. `6.1` for the 6.1 milestone.

The `type` of the installer payload should be set to `BetaTest`.

# 3 - Beta Artefacts

Producing a final beta artefact involves queuing up a new payload for BHoMBot, which can be done by DevOps using the scripts available to queue up tasks into BHoMBots queue.

The major version should be set with a `v` at the start for the final artefact - e.g. `v6.1` for the 6.1 milestone.

The `type` of the installer payload should be set to `Beta`.

## 3.1 - Beta Patching

Producing a Beta patch is the same as producing a final beta, with the action being queued up by DevOps for BHoMBot to execute.

The major version should be set with a `v` at the start of the final artefact and be set to the milestone that has been completed that is being patched - e.g. `v6.1` to patch the 6.1 beta.

The minor version should be set to a number appropriate for the number of patches made - e.g. `2` if this is the second patch being made.

The `type` of the installer payload should be set to `Beta`.

# 4 - Releasing the artefact

Releasing the artefact involves downloading the appropriate artefact from the location where BHoMBot produces Beta artefacts for review, and uploading them to the appropriate location for general consumption. This is a manual process after sign off of the beta has been acquired.